version: 1
applications:
  - appRoot: application/merchant-app
    frontend:
      phases:
        preBuild:
          commands:
            - cd ../..
            - yarn install --frozen-lockfile
            - cd application
            - yarn build-common
        build:
          commands:
            - cd application/merchant-app
            - yarn build
      artifacts:
        baseDirectory: application/merchant-app/dist
        files:
          - '**/*'
      cache:
        paths:
          - node_modules/**/*
          - application/node_modules/**/*
          - application/common-core/node_modules/**/*
          - application/common-ui/node_modules/**/*
          - application/merchant-app/node_modules/**/* 